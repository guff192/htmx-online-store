{% extends '_base.html' %}

{% block title %}{{ shop.name }} | –ú–æ–∏ –∑–∞–∫–∞–∑—ã{% endblock %}

{% block header %}
    <h1 id="page-header" class="text-indigo-50 text-4xl font-bold text-center mb-5 mt-2">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h1>
{% endblock %}

{% block content %}

{% if not orders %}
    <p class="text-center font-bold text-white">
        –ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç üôÉ. –ü–µ—Ä–µ–π–¥—ë–º –≤ <a class="hover:underline text-indigo-400" href="/products/catalog#offset">–∫–∞—Ç–∞–ª–æ–≥</a>?
    </p>
{% endif %}

{% for order in orders %}
<div id="order{{ order.id }}" class="border border-white p-5">

    <h2 class="text-3xl font-bold uppercase text-center mb-5 mt-1">–ó–∞–∫–∞–∑ {{ order.id }}</h2>
    <button hx-get="/order/{{ order.id }}" hx-target="#content" hx-swap="innerHTML" hx-replace-url="true"
        class="bg-lightBlue rounded p-2 font-bold">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>

    <h3 class="text-2xl text-right">–°—É–º–º–∞: {{ order.sum }}‚ÇΩ</h3>
    <p class="mb-10 text-right">{{ order.date.strftime('%Y-%B-%d %H:%M') }}</p>

    <h3 class="text-3xl mb-5">–¢–æ–≤–∞—Ä—ã</h3>
    {% for product in order.products %}
        <img
            hx-trigger="load"
            hx-get="/photos/main?product_name={{ product.product_name }}&size=thumbs"
            hx-swap="outerHTML"
            src="{{ url_for('static', path='images/loading.webp') }}"
            alt="{{ product.product_name }}"
        >

        <div class="mb-5">
            <h4 class="text-xl">{{ product.product_name }}</h4>
            <p>–¶–µ–Ω–∞: {{ product.basic_price + product.selected_configuration.additional_price }}‚ÇΩ</p>
            <p>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: {{ product.selected_configuration.name }} (+{{ product.selected_configuration.additional_price }}‚ÇΩ)</p>
            <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: {{ product.count }} —à—Ç—É–∫{% if product.count % 10 in [2, 3, 4] %}–∏{% elif product.count % 10 == 1 %}–∞{% endif %}</p>
        </div>

    {% endfor %}

</div>
{% endfor %}


{% endblock %}


